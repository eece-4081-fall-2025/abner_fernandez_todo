
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My ToDo MVP</title>
    <!-- Basic Tailwind CSS CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .container { max-width: 600px; }
        .completed { text-decoration: line-through; color: #a0aec0; }
        input[type="datetime-local"] { 
            padding: 0.5rem; 
            border-radius: 0.375rem; 
            border: 1px solid #d2d6dc;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen pt-10 font-sans">
    <div class="container mx-auto p-4 bg-white shadow-xl rounded-xl">
        <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6 border-b pb-2">
            Task Manager MVP (Epic 1)
        </h1>

        <!-- Form for creating a new task (US 1) -->
        <form method="post" action="{% url 'todo:task_list' %}" class="flex flex-col sm:flex-row gap-2 mb-8 p-4 bg-indigo-50 rounded-lg shadow-inner">
            {% csrf_token %}
            <!-- Title Input -->
            <div class="flex-grow">
                {{ form.title }}
            </div>
            <!-- Due Date Input -->
            <div class="flex-grow-0 w-full sm:w-auto">
                {{ form.due_date }}
            </div>
            <!-- Submit Button -->
            <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-150 shadow-md">
                Add Task
            </button>
        </form>

        <!-- List of Tasks (US 2) -->
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Pending Tasks</h2>
        
        {% for task in tasks %}
        <div class="flex items-center justify-between p-3 mb-2 bg-gray-50 rounded-lg shadow-sm hover:shadow-md transition duration-150 
            {% if task.is_completed %} completed {% endif %}">
            
            <div class="flex-grow">
                <p class="text-lg font-medium">{{ task.title }}</p>
                <span class="text-xs text-gray-500">Due: {{ task.due_date|date:"M d, Y P" }}</span>
            </div>

            <div class="flex gap-2 ml-4">
                {% if not task.is_completed %}
                <!-- Complete Button (US 3) -->
                <form method="post" action="{% url 'todo:complete' task.pk %}">
                    {% csrf_token %}
                    <button type="submit" class="text-sm bg-green-500 hover:bg-green-600 text-white py-1 px-3 rounded-md shadow-md">
                        Done
                    </button>
                </form>
                {% else %}
                <span class="text-sm text-green-600 font-semibold">Completed</span>
                {% endif %}

                <!-- Delete Button (US 4 - Bonus, needed for a clean MVP) -->
                <form method="post" action="{% url 'todo:delete' task.pk %}">
                    {% csrf_token %}
                    <button type="submit" class="text-sm bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-md shadow-md">
                        Delete
                    </button>
                </form>
            </div>
        </div>
        {% empty %}
        <p class="text-center text-gray-500 p-8 border border-dashed rounded-lg">All tasks completed! Add a new one above.</p>
        {% endfor %}
    </div>
</body>
</html>
